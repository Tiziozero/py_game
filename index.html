<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Infinite Grid</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    #grid-container {
      flex: 1;
      overflow: auto;
      background: #f5f5f5;
    }
    #grid {
      display: grid;
      grid-template-columns: repeat(50, 20px);
      grid-auto-rows: 20px;
    }
    .cell {
      border: 1px solid #ccc;
      background: white;
      width: 20px;
      height: 20px;
      cursor: pointer;
    }
    .cell.active {
      background: red;
    }
    button {
      padding: 10px;
      border: none;
      background: black;
      color: white;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <button id="download">Download Grid JSON</button>
  <div id="grid-container">
    <div id="grid"></div>
  </div>

  <script>
    const gridElement = document.getElementById("grid");
    const rows = 50;
    const cols = 50;
    let grid = Array.from({ length: rows }, () => Array(cols).fill(0));

    let isMouseDown = false;

    // build grid
    for (let r = 0; r < rows; r++) {
      for (let c = 0; c < cols; c++) {
        const cell = document.createElement("div");
        cell.classList.add("cell");
        cell.dataset.row = r;
        cell.dataset.col = c;

        const toggleCell = () => {
          const row = +cell.dataset.row;
          const col = +cell.dataset.col;
          grid[row][col] = 1;
          cell.classList.add("active");
        };

        cell.addEventListener("mousedown", (e) => {
          isMouseDown = true;
          toggleCell();
          e.preventDefault(); // prevent text selection
        });
        cell.addEventListener("mouseover", () => {
          if (isMouseDown) toggleCell();
        });

        gridElement.appendChild(cell);
      }
    }

    document.addEventListener("mouseup", () => {
      isMouseDown = false;
    });

    // download json
    document.getElementById("download").addEventListener("click", () => {
      const blob = new Blob([JSON.stringify(grid)], { type: "application/json" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "grid.json";
      a.click();
      URL.revokeObjectURL(a.href);
    });
  </script>
</body>
</html>

